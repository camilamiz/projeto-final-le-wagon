<section class="projects-section">
  <div class="section-presentation">
    <h3>PROJETOS</h3>
  </div>
  <div class="row col-xs-12">
    <div class="project-info col-xs-4 col-xs-offset-2">
      <div class="icon">
          <i class="far fa-sticky-note"></i>
        </div>
      <br><br>
      <div class="info-texto">
        <p>As Leis levam diferentes <%= link_to 'nomes', 'http://splegisws.camara.sp.gov.br/ws/ws2.asmx/TiposDeMateria', target:"_blank" %> de acordo com seus objetivos. <br> Ao lado temos uma listagem de algumas delas e o significado de cada sigla.<br>
          Sim, nós concordamos que a maioria dos nomes não é nem um pouco clara. <br>
        A base de dados para gerar os gráficos de quantidade de tipos de projetos foi tirada <%= link_to 'deste arquivo', 'http://splegisws.camara.sp.gov.br/ws/ws2.asmx/ProjetosPorAnoJSON?ano=2018', target:"_blank" %>.</p>
      </div>
    </div>
    <div class="col-xs-4">
      <br>
      <div class="listagem-de-nomes">
        <h4>Lista de nomes</h4>
      </div>
      <div class="scroll-wrapper">
        <%= render 'components/tipos_de_projeto' %>
      </div>
    </div>
  </div> <!-- row  -->
</section>

<section class="charts-section">
  <div class="section-presentation">
    <h3>STATUS E TIPOS DE PROJETOS</h3>
  </div>
  <div class="chart-row">
    <div class="row col-xs-5 col-xs-offset-1">
      <div class="chart-box">
        <%= line_chart @status_list.map { |stat|
    {name: stat, data: @projects.where(status: stat).group(:ano).count }
      }, width: "500px", height: "300px", thousands: "." %>
      </div>
      <div class="chart-text">
        <p>Um projeto passa por fases diversas até que seja aprovado. <br> No gráfico acima temos a quantidade de projetos em cada status ao longo dos anos.</p>
      </div>
    </div>
    <div class="row col-xs-5">
      <div class="chart-box">
        <%= line_chart @project_list.map { |project|
      {name: project, data: @projects.where(tipo: project).group(:ano).count }
        }, width: "500px", height: "300px", thousands: "." %>
      </div>
      <div class="chart-text">
        <p>No gráfico acima listamos a quantidade de projetos pelos tipos que aparecem em maior quantidade na base de dados, sendo eles Projeto de Lei, Projeto de Decreto Legislativo, Requerimento, Indicação e Substitutivo.</p>
      </div>
    </div>
  </div>
</section>
<section>
  <div class="section-presentation">
    <h3>QUANTIDADE DE PROJETOS POR TIPO</h3>
  </div>
    <div class="chart-row">
      <div class="row col-xs-12 row-margin-left">
        <div class="col-xs-3 col-xs-offset-1 ">
          <h4>2018</h4>
          <%= column_chart Project.where(ano: 2018).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "uantidade", width: "350px" %>
        </div>
        <div class="col-xs-3">
          <h4>2017</h4>
          <%= column_chart Project.where(ano: 2017).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
        </div>
        <div class="col-xs-3">
          <h4>2016</h4>
          <%= column_chart Project.where(ano: 2016).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
        </div>
      </div>
    </div>
</section>

<section id="project-type-section row-margin-left">
  <div class="row col-xs-12">
    <div class="col-xs-3 col-xs-offset-1 ">
      <h4>2015</h4>
      <%= column_chart Project.where(ano: 2015).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
    </div>
    <div class="col-xs-3">
      <h4>2014</h4>
      <%= column_chart Project.where(ano: 2014).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
    </div>
    <div class="col-xs-3">
      <h4>2013</h4>
      <%= column_chart Project.where(ano: 2013).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
    </div>
  </div>
</section>
<section>
  <div class="chart-row">
    <div class="section-chart">
      <div class="row col-xs-12" id="INDcase">
        <div class="col-xs-4">
          <div id="chart-2012">
            <h4>2012</h4>
            <%= column_chart Project.where(ano: 2012).group(:tipo).count, thousands: ".", xtitle: "Tipo de matéria", ytitle: "Quantidade", width: "350px"  %>
          </div>
        </div>
        <div class="project-info col-xs-6">
          <p>O propósito do gráfico abaixo é explicar a quantidade de projetos de 2012, que destoa da média dos outros anos. A partir da base de dados listamos os nomes dos vereadores da época que geraram projetos do tipo IND (Indicação), que totalizam mais de 11.000 só no ano de 2012. </p>
          <div class="project-chart">
          <%= column_chart Project.councillors_names(2012, "IND"), thousands: ".",discrete: true%>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

